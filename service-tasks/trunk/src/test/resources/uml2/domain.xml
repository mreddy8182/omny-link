<umldiagrams><UMLClassDiagram name="Unloq Domain" history="&lt;table>t&lt;tr>&lt;th>Version&lt;/th>&lt;th>Date&lt;/th>&lt;th>Author&lt;/th>&lt;th>Comments&lt;/th>&lt;/tr>&lt;tr>&lt;td>1.0 Draft&lt;/td>&lt;td>&lt;/td>&lt;td>Tim Stephenson&lt;/td>&lt;td>Initial draft for comment&lt;/td>&lt;/tr>&lt;tr>&lt;td>1.0 Draft 2&lt;/td>&lt;td>&lt;/td>&lt;td>Tim Stephenson&lt;/td>&lt;td>&lt;ul>&lt;li>Changed mapping to Sugar of Account.sector, Account.description&lt;/li>&lt;li>Renamed Account.desc -> Account.description&lt;/li>&lt;li>Sub-sector now free text.&lt;/li>&lt;/ul>&lt;/td>&lt;/tr>&lt;/table>" backgroundNodes="#ffffbb"><UMLClass id="UMLClass_14" x="125" y="512" width="593" height="386" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/><item value="«Sugar.SugarAccount»"/></superitem><item id="name" value="AccountInfo" documentation="&lt;h3&gt;Notes&lt;/h3&gt;,&lt;ul&gt;,  &lt;li&gt;&lt;b&gt;Account Type&lt;/b&gt; all from the website are ‘customers’. Other values ,  (VC etc.) may be used from the CRM system. &lt;/li&gt;,  &lt;li&gt;&lt;b&gt;Company Number&lt;/b&gt; an 8 digit string.&lt;/li&gt;,  &lt;li&gt;&lt;b&gt;Business Region&lt;/b&gt; general area of the UK.&lt;/li&gt;,  &lt;li&gt;&lt;b&gt;Business sector / sub-sector&lt;/b&gt; The sub-sector must be filtered to ,  only show those applicable to the sector selected. When sent to the API ,  only sub-sector need be sent since that identifies the sector implicitly.&lt;/li&gt;,  &lt;li&gt;The numbers are integers are integers as we will round to the nearest ,  pound.&lt;/li&gt;,  &lt;li&gt;Valuations correspond to the high, medium and low formulae included in the ,  brief. Valuations should be calculated in the website and sent to the API as,  the formulae may change occasionally.&lt;/li&gt;,  &lt;li&gt;&lt;b&gt;Asking price&lt;/b&gt; May be a positive integer, a range or ‘Available on ,  Request’ (default).&lt;/li&gt; ,  &lt;li&gt;&lt;b&gt;Business Listing&lt;/b&gt; A subset of the Account data will be exposed as ,  the 'Business Listing'. Included attributes are: ,    &lt;ul&gt;,      &lt;li&gt;Short Description&lt;/li&gt;,      &lt;li&gt;Description&lt;/li&gt;,      &lt;li&gt;Region&lt;/li&gt;,      &lt;li&gt;Sector&lt;/li&gt;,      &lt;li&gt;Sub-sector&lt;/li&gt;,      &lt;li&gt;Asking Price&lt;/li&gt;,      &lt;li&gt;Turnover (last completed year)&lt;/li&gt;,      &lt;li&gt;Operating Profit (last completed year)&lt;/li&gt;,      &lt;li&gt;EBITDA (if available)&lt;/li&gt;,      &lt;li&gt;Property Info&lt;/li&gt;,      &lt;li&gt;Reason For Selling&lt;/li&gt;,      &lt;li&gt;Employees&lt;/li&gt;,      &lt;li&gt;Incorporation Year&lt;/li&gt;,      &lt;li&gt;Additional Info&lt;/li&gt;,      &lt;li&gt;Potential Purchasers&lt;/li&gt;,    &lt;/ul&gt;,  &lt;/li&gt;,&lt;/ul&gt; "/><superitem id="attributes" visibleSubComponents="true"><item value="«Sugar.name»+name:string{required}"/><item value="«Sugar.company_no_c»+companyNumber:int{maxLength_8}"/><item value="«Sugar.aliases»aliases:string{comma-separated list}"/><item value="«Sugar.website»+businessWebsite:string"/><item value="«Sugar.short_desc_c»+shortDesc:string{maxLength_120}"/><item value="«Sugar.description»+description:text"/><item value="«Sugar.employees»+noOfEmployees:int{min_1}"/><item value="«Sugar.year_established_c»+incorporationYear:year"/><item value="«Sugar.share_of_business_c»+shareOfBusiness:percentage"/><item value="«Sugar.already_contacted_c»+alreadyContacted:text"/><item value="«Sugar.val_ebitda_c»+ebitda:int{min_0}"/><item value="«Sugar.val_surplus_c»+surplus:int{maxLength_10}"/><item value="«Sugar.val_dep_amortisation_c»+depreciationAmortisation:int{maxLength_10}"/><item value="«Sugar.val_operating_profit_c»+operatingProfit:int{maxLength_10}"/><item value="«Sugar.val_adjustments_c»+adjustments:int{maxLength_10}"/><item value="«Sugar.val_bank_borrowing_c»+borrowing:int{maxLength_10}"/><item value="«Sugar.val_quote_low_c»+lowQuote:int{maxLength_10}"/><item value="«Sugar.val_quote_medium_c»+mediumQuote:int{maxLength_10}"/><item value="«Sugar.val_quote_high_c»+highQuote:int{maxLength_10}"/><item value="«Sugar.asking_price_c»+askingPrice:string=&quot;Available on Request&quot;"/><item value="«Sugar.property_info_c»+propertyInfo:text"/><item value="«Sugar.reason_for_selling_c»+reasonForSelling:text"/><item value="«Sugar.additional_info_c»+additionalInfo:text"/><item value="«Sugar.potential_purchasers_c»+potentialPurchasers:text"/><item value="«Sugar.sub_sector_c»+subSector:string"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_13" x="25" y="931" width="785" height="100" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/><item value="«Sugar.SugarAccount»"/></superitem><item id="name" value="AccountFinancials" documentation="&lt;h3&gt;Notes&lt;/h3&gt;,&lt;ul&gt;,  &lt;li&gt;These attributes are captured for the current and each of the last two ,  years though none is mandatory. In the CRM system these are all attached ,  directly to the Account.&lt;/li&gt;,  &lt;li&gt;The numbers are integers are integers as we will round to the nearest ,  pound.&lt;/li&gt;,&lt;/ul&gt;"/><superitem id="attributes" visibleSubComponents="true"><item value="«Sugar.current_year_c,last_year_c,previous_year_c»+financialYear:year"/><item value="«Sugar.current_year_turnover_c,last_year_turnover_c,previous_year_turnover_c»+turnover:int{min_0}"/><item value="«Sugar.current_year_profit_c,last_year_profit_c,previous_year_profit_c»+profit:int{min_0}"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_12" x="300" y="216" width="369" height="152" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/><item value="«Sugar.SugarContact»"/></superitem><item id="name" value="Contact" documentation="&lt;h3&gt;Notes&lt;/h3&gt;,&lt;ul&gt;,  &lt;li&gt;Password will be stored in the website only and not passed to the API. All,  password management functionality such as reset remains in website too.&lt;/li&gt;,  &lt;li&gt;Source of Visit is NOT the default Sugar one, but will be filled out by ,  the website.&lt;/li&gt;,&lt;/ul&gt;,"/><superitem id="attributes" visibleSubComponents="true"><item value="«Sugar.first_name»+firstName:string{required}"/><item value="«Sugar.last_name»+lastName:string{required}"/><item value="«Sugar.phone_work»+phone:tel{required}"/><item value="«Sugar.phone_other»+phone2:tel"/><item value="«Sugar.email1»+email:string{required}"/><item value="«Sugar.real_source_c»+source:string"/><item value="«Sugar.date_entered»+signUpDate:timestamp"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_11" x="115" y="1134" width="737" height="61" backgroundColor="#FFBAFF" lineColor="#294253" lineWidth="1" fontFamily="monospace" fontSize="12" fontStyle="normal" fontWeight="normal" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«API»"/></superitem><item id="name" value="ReferenceDataService" documentation="&lt;p&gt;,The service to retrieve reference data maintained in the CRM ,system. It may be desirable to create a local cache in the website for ,performance reasons.  ,&lt;/p&gt;,,&lt;p&gt;,This is a RESTful service accessed at ,&lt;code&gt;BASE_URL/msg/unloq.reference&lt;/code&gt;. The JSON returned is an array ,holding sub-arrays of each of the reference data types. ,&lt;/p&gt;"/><superitem id="attributes" visibleSubComponents="true"/><superitem id="operations" visibleSubComponents="true"><item value="+get():[AccountType[],ActionType[],PreferredTiming[],Region[],SaleStage[],Sector[],Title[]]"/></superitem></UMLClass><UMLClass id="UMLClass_10" x="15" y="44" width="450" height="87" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/><item value="«Sugar.SugarLead»"/></superitem><item id="name" value="LeadActivity" documentation="&lt;h3&gt;Notes&lt;/h3&gt;,&lt;ul&gt;,  &lt;li&gt;For now all activities are treated as Leads. Logic to determine if some,  are opportunities may be provided later but if so this will sit behind the ,  API.&lt;/li&gt; ,  &lt;li&gt;&lt;b&gt;Stage in Sale&lt;/b&gt; defaults to 'PREPARING'.&lt;/li&gt;,&lt;/ul&gt;"/><superitem id="attributes" visibleSubComponents="true"><item value="«Sugar.date_entered»+dateOfActivity:timestamp{required}"/><item value="«Sugar.description»+description:text"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_9" x="10" y="336" width="150" height="115" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«enum»"/></superitem><item id="name" value="SaleStage" documentation="Defaults to 'Preparing'."/><superitem id="attributes" visibleSubComponents="true"><item value="+PREPARING"/><item value="+EQUIPPING"/><item value="+NEGOTIATING"/><item value="+COMPLETING"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_8" x="200" y="1043" width="225" height="75" backgroundColor="#FFBFF9" lineColor="#294253" lineWidth="1" fontFamily="monospace" fontSize="12" fontStyle="normal" fontWeight="normal" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«API»"/></superitem><item id="name" value="ContactService" documentation="&lt;p&gt;,The service to create and retrieve contacts including all associated data about ,the business. The website will not maintain a persistent copy of data at all ,but depending on performance it may be necessary to cache and periodically ,refresh. At no stage should the website hold the master copy of any data. ,In other words any such data may be deleted and fully recreated by refreshing ,from CRM at any time.,&lt;/p&gt;,,&lt;p&gt;,This is a RESTful service accessed at ,&lt;code&gt;BASE_URL/msg/unloq.newAcctRegistration&lt;/code&gt;. All parameters and return ,types must be serialised as JSON. ,&lt;/p&gt;,,&lt;p&gt;,The picture below shows how to use the Chrome application ,&lt;a href=&quot;http://www.getpostman.com/&quot;&gt;Postman&lt;/a&gt; to create a minimal contact.,,&lt;img src=&quot;images/ContactServicePut.png&quot;/&gt;,,The GET verb may be used to retrieve a single contact and dependent data based ,on a combination of its required fields as shown below. ,,&lt;img src=&quot;images/ContactServiceGet.png&quot;/&gt;,&lt;/p&gt;"/><superitem id="attributes" visibleSubComponents="true"/><superitem id="operations" visibleSubComponents="true"><item value="+put(:Contact)"/><item value="+get(query:Contact):Contact"/></superitem></UMLClass><UMLClass id="UMLClass_7" x="115" y="248" width="169" height="75" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/></superitem><item id="name" value="ActionType" documentation="An action the user may perform on the website. All actions are treated as leads,within the website but may be re-classified as opportunities in the backend. "/><superitem id="attributes" visibleSubComponents="true"><item value="+name:string{unique}"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_6" x="820" y="125" width="169" height="70" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/></superitem><item id="name" value="Region" documentation="The general area of the UK, for example city or county.,"/><superitem id="attributes" visibleSubComponents="true"><item value="+name:string{unique}"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_5" x="650" y="97" width="110" height="100" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«enum»"/></superitem><item id="name" value="Title" documentation="&lt;h3&gt;Questions&lt;/h3&gt;,&lt;ul&gt;,  &lt;li&gt;Will these suffice? Add 'Other'?&lt;/li&gt;,&lt;ul&gt;"/><superitem id="attributes" visibleSubComponents="true"><item value="+MR"/><item value="+MISS"/><item value="+MRS"/><item value="+MS"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_4" x="805" y="262" width="169" height="61" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/></superitem><item id="name" value="Sector" documentation="A classification of the industry the business operates in. Sub-sector is ,available as free text on Account to clarify as needed. "/><superitem id="attributes" visibleSubComponents="true"><item value="+name:string{unique}"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_3" x="815" y="661" width="169" height="61" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/></superitem><item id="name" value="PreferredTiming" documentation=",&lt;h3&gt;Notes&lt;/h3&gt;,An indication of when the vendor would like the sale to occur, for instance 'Q2 ,2014'.,,- As Soon As Possible,- Within 3 Months,- Within 6 Months,- Within 12 Months,- Within 24 Months,- In No Particular Hurry,"/><superitem id="attributes" visibleSubComponents="true"><item value="+name:string{unique}"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_2" x="500" y="7" width="169" height="61" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«entity»"/></superitem><item id="name" value="LeadRequest" documentation="&lt;h3&gt;Notes&lt;/h3&gt;,Where a prospect specifically asks for our help through FirmGains ,(i.e. with a view to engaging us).,,List of possible requests are as follows:,-        Detailed business valuation (financial info),-        Business preparation (basic info),-        Change management (basic info),-        Business recovery (basic info),-        Sales agent (financial info),-        Business listings (financial info),-        Negotiation support (basic info),-        Administration of Sale (basic info),-        Wealth Management (basic info),-        SEIS / Investments(basic info),-        Professional Services (basic info),-        Full due diligence (basic info),-        Digital due diligence (basic info),,*where 'basic info' means they just need the contact details and simple ,business info, and 'financial info' means more financial numbers (not the ,valuation numbers, the other yearly ones).,"/><superitem id="attributes" visibleSubComponents="true"><item value="+name:string{unique}"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_1" x="880" y="400" width="113" height="87" backgroundColor="#ffffbb" lineColor="#294253" lineWidth="1" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«enum»"/></superitem><item id="name" value="AccountType" documentation="Defaults to 'Customer'. May only be changed in the CRM backend. "/><superitem id="attributes" visibleSubComponents="true"><item value="+CUSTOMER"/><item value="+BROKER"/><item value="+VC"/></superitem><superitem id="operations" visibleSubComponents="true"/></UMLClass><UMLClass id="UMLClass_0" x="505" y="1043" width="161" height="61" backgroundColor="#FFBFFC" lineColor="#294253" lineWidth="1" fontFamily="monospace" fontSize="12" fontStyle="normal" fontWeight="normal" tagValues=""><superitem id="stereotypes" visibleSubComponents="true"><item value="«API»"/></superitem><item id="name" value="LeadService" documentation="&lt;p&gt;,The service to create Leads based on user activity on the website.,&lt;/p&gt;,,&lt;p&gt;,This is a RESTful service accessed at ,&lt;code&gt;BASE_URL/msg/unloq.newActivity&lt;/code&gt;. All parameters and return ,types must be serialised as JSON. ,&lt;/p&gt;"/><superitem id="attributes" visibleSubComponents="true"/><superitem id="operations" visibleSubComponents="true"><item value="+put(:LeadActivity)"/></superitem></UMLClass><UMLAssociation id="UMLAssociation_0" side_A="UMLClass_12" side_B="UMLClass_5" direction="b"><point x="483.53389830508473" y="216"/><point x="483" y="174"/><point x="650" y="153.6891891891892"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.title»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="0..1"/></UMLAssociation><UMLAssociation id="UMLAssociation_1" side_A="UMLClass_12" side_B="UMLClass_14"><point x="472.90677966101697" y="368"/><point x="450.9406779661017" y="512"/><superitem id="stereotype" visibleSubComponents="true"/><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="1"/><item id="multiplicityB" value="1"/></UMLAssociation><UMLAssociation id="UMLAssociation_2" side_A="UMLClass_14" side_B="UMLClass_6"><point x="575.65875" y="512"/><point x="741" y="305"/><point x="741" y="213"/><point x="820" y="187.3914373088685"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.business_region_c»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="1"/></UMLAssociation><UMLAssociation id="UMLAssociation_3" side_A="UMLClass_14" side_B="UMLClass_4"><point x="633.5232974910394" y="512"/><point x="728" y="426"/><point x="728" y="376"/><point x="830.5089820359282" y="323"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.industry»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="1"/></UMLAssociation><UMLAssociation id="UMLAssociation_4" side_A="UMLClass_14" side_B="UMLClass_3" direction="b"><point x="718" y="669.6835555555556"/><point x="984" y="638"/><point x="947.6728971962617" y="661"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.preferred_sale_timing_c»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="1"/></UMLAssociation><UMLAssociation id="UMLAssociation_5" side_A="UMLClass_14" side_B="UMLClass_9"><point x="125" y="523.6838995568685"/><point x="83" y="498"/><point x="83.89952153110048" y="451"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.stage_in_sale_c»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="1"/></UMLAssociation><UMLAssociation id="UMLAssociation_6" side_A="UMLClass_14" side_B="UMLClass_13"><point x="418.7028985507246" y="898"/><point x="418.22463768115944" y="931"/><superitem id="stereotype" visibleSubComponents="true"/><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="1"/><item id="multiplicityB" value="0..3"/></UMLAssociation><UMLAssociation id="UMLAssociation_7" side_A="UMLClass_10" side_B="UMLClass_9"><point x="195.5016393442623" y="131"/><point x="84" y="240"/><point x="84.62540716612378" y="336"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.stage_in_sale_c»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="1"/></UMLAssociation><UMLAssociation id="UMLAssociation_8" side_A="UMLClass_7" side_B="UMLClass_10"><point x="207.17045454545453" y="248"/><point x="231.10227272727272" y="131"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.action_website_c»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="1"/><item id="multiplicityB" value="0..*"/></UMLAssociation><UMLAssociation id="UMLAssociation_9" side_A="UMLClass_14" side_B="UMLClass_1" direction="b"><point x="718" y="554.4470873786407"/><point x="880" y="472.18883495145633"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.account_type»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="0..1"/></UMLAssociation><UMLAssociation id="UMLAssociation_10" side_A="UMLClass_10" side_B="UMLClass_2"><point x="465" y="103.16964285714286"/><point x="520" y="107"/><point x="556.1942446043165" y="68"/><superitem id="stereotype" visibleSubComponents="true"><item value="«Sugar.lead_requested_c»"/></superitem><item id="name" value=""/><item id="roleA" value=""/><item id="roleB" value=""/><item id="multiplicityA" value="0..*"/><item id="multiplicityB" value="1"/></UMLAssociation></UMLClassDiagram></umldiagrams>